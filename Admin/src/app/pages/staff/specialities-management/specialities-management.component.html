<div class="container-fluid">
    <h2>Gestion des Spécialités et Filières (Staff)</h2>
    
    <!-- Onglets -->
    <mat-tab-group [(selectedIndex)]="selectedTabIndex" class="mb-4">
        <!-- Onglet Spécialités -->
        <mat-tab label="Spécialités">
            <div class="mt-3">
                <!-- Barre d'outils -->
                <div class="row mb-3">
                    <div class="col-md-6">
                        <div class="d-flex gap-2">
                            <button class="btn btn-outline-primary" (click)="refreshSpecialities()" [disabled]="refreshingSpecialities">
                                <i class="bx bx-refresh" [class.bx-spin]="refreshingSpecialities"></i>
                                {{ refreshingSpecialities ? 'Actualisation...' : 'Actualiser' }}
                            </button>
                            <button class="btn btn-outline-info" (click)="exportSpecialitiesToExcel()">
                                <i class="bx bx-export"></i>
                                Exporter
                            </button>
                        </div>
                    </div>
                    <div class="col-md-6 text-end">
                        <div class="d-flex gap-2 justify-content-end">
                            <button class="btn btn-outline-secondary" (click)="toggleAdvancedFiltersSpecialities()">
                                <i class="bx bx-filter-alt"></i>
                                {{ showAdvancedFiltersSpecialities ? 'Masquer' : 'Afficher' }} les filtres
                            </button>
                            <button class="btn btn-soft-primary waves-effect waves-light" 
                                    (click)="openCreateSpecialityModal()">
                                <i class="bx bx-plus"></i> Créer une Spécialité
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Filtres avancés pour les spécialités -->
                <div class="row mb-3" *ngIf="showAdvancedFiltersSpecialities">
                    <div class="col-12">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-light">
                                <h6 class="mb-0">
                                    <i class="bx bx-filter-alt me-2"></i>
                                    Filtres avancés - Spécialités
                                </h6>
                            </div>
                            <div class="card-body">
                                <form [formGroup]="filterFormSpecialities" class="row g-3">
                                    <div class="col-md-3">
                                        <label class="form-label">Type d'examen</label>
                                        <select class="form-select" formControlName="examType">
                                            <option value="">Tous</option>
                                            <option value="CQP">CQP</option>
                                            <option value="DQP">DQP</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Centre de formation</label>
                                        <select class="form-select" formControlName="trainingCenterId">
                                            <option value="">Tous</option>
                                            <option *ngFor="let center of trainingCenters" [value]="center.agreementNumber">
                                                {{ center.fullName || center.acronym }}
                                            </option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Statut</label>
                                        <select class="form-select" formControlName="status">
                                            <option value="">Tous</option>
                                            <option value="active">Actives</option>
                                            <option value="inactive">Inactives</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Code</label>
                                        <input type="text" class="form-control" formControlName="code" placeholder="Code de spécialité">
                                    </div>
                                    <div class="col-12">
                                        <div class="d-flex gap-2">
                                            <button type="button" class="btn btn-primary" (click)="applyAdvancedFiltersSpecialities()">
                                                <i class="bx bx-search"></i>
                                                Appliquer les filtres
                                            </button>
                                            <button type="button" class="btn btn-outline-secondary" (click)="clearFiltersSpecialities()">
                                                <i class="bx bx-x"></i>
                                                Effacer
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Statistiques des spécialités -->
                <div class="row">
                    <div *ngFor="let stat of specialityStats" class="col-md-4">
                        <app-stat [title]="stat.title" [value]="stat.value" [icon]="stat.icon"></app-stat>
                    </div>
                </div>
                
                <!-- Table des spécialités -->
                <div class="row mt-3">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-body">
                                <div class="row justify-content-between mb-3">
                                    <div class="col-md-4">
                                        <mat-form-field appearance="outline" class="w-100">
                                            <mat-label>Filtrer les spécialités</mat-label>
                                            <input matInput (keyup)="applyFilterSpecialities($event)" #inputSpecialities placeholder="Rechercher par nom ou description">
                                            <mat-icon matSuffix>search</mat-icon>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-md-2 text-end">
                                        <button mat-icon-button matTooltip="Refresh list" (click)="loadSpecialities()">
                                            <mat-icon>refresh</mat-icon>
                                        </button>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <table mat-table [dataSource]="dataSourceSpecialities" matSort class="w-100">
                                        <!-- Name Column -->
                                        <ng-container matColumnDef="name">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Nom </th>
                                            <td mat-cell *matCellDef="let speciality"> 
                                                <span class="fw-semibold">{{speciality.name || 'N/A'}}</span>
                                            </td>
                                        </ng-container>
                                        <!-- Code Column -->
                                        <ng-container matColumnDef="code">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Code </th>
                                            <td mat-cell *matCellDef="let speciality"> 
                                                <span class="badge bg-primary">{{speciality.code || 'N/A'}}</span>
                                            </td>
                                        </ng-container>
                                        <!-- Description Column -->
                                        <ng-container matColumnDef="description">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Description </th>
                                            <td mat-cell *matCellDef="let speciality"> 
                                                {{speciality.description || 'Aucune description disponible'}}
                                            </td>
                                        </ng-container>
                                        <!-- Exam Type Column -->
                                        <ng-container matColumnDef="examType">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Type d'Examen </th>
                                            <td mat-cell *matCellDef="let speciality"> 
                                                <span class="badge bg-info">{{speciality.examType || 'N/A'}}</span>
                                            </td>
                                        </ng-container>
                                        <!-- Activée Column -->
                                        <ng-container matColumnDef="isActived">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Activée ? </th>
                                            <td mat-cell *matCellDef="let speciality"> 
                                                <span class="badge bg-success">Oui</span>
                                            </td>
                                        </ng-container>
                                        <!-- Actions Column -->
                                        <ng-container matColumnDef="actions">
                                            <th mat-header-cell *matHeaderCellDef class="text-end"> Actions </th>
                                            <td mat-cell *matCellDef="let speciality" class="text-end">
                                                <div class="d-flex justify-content-end gap-1">
                                                    <button mat-icon-button color="primary" matTooltip="Voir détail" (click)="openDetailSpecialityPopup(speciality)">
                                                        <mat-icon>visibility</mat-icon>
                                                    </button>
                                                    <button mat-icon-button color="accent" matTooltip="Modifier" (click)="editSpeciality(speciality)">
                                                        <mat-icon>edit</mat-icon>
                                                    </button>
                                                    <button mat-icon-button color="warn" matTooltip="Supprimer" (click)="deleteSpeciality(speciality)" [disabled]="processingSpecialities">
                                                        <mat-icon>delete</mat-icon>
                                                    </button>
                                                    <button mat-icon-button color="warning" matTooltip="Activer la spécialité" (click)="activateSpeciality(speciality)">
                                                        <mat-icon>bolt</mat-icon>
                                                    </button>
                                                </div>
                                            </td>
                                        </ng-container>
                                        <tr mat-header-row *matHeaderRowDef="displayedColumnsSpecialities"></tr>
                                        <tr mat-row *matRowDef="let row; columns: displayedColumnsSpecialities;"></tr>
                                        <tr class="mat-row" *matNoDataRow>
                                            <td class="mat-cell text-center py-4" colspan="6">
                                                <div class="d-flex flex-column align-items-center">
                                                    <mat-icon class="mb-2" style="font-size: 48px; height: 48px; width: 48px;">search_off</mat-icon>
                                                    <h4 class="text-muted">Aucune spécialité trouvée</h4>
                                                    <p *ngIf="inputSpecialities.value" class="text-muted">
                                                        Aucun résultat pour "{{inputSpecialities.value}}"
                                                    </p>
                                                    <button mat-raised-button color="primary" class="mt-2" (click)="openCreateSpecialityModal()" *ngIf="!inputSpecialities.value">
                                                        Créer votre première spécialité
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" showFirstLastButtons aria-label="Select page of specialities" class="mt-3"></mat-paginator>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Section d'association spécialités-centre -->
                <div class="card mt-4">
                    <div class="card-body">
                        <h5>Associate Specialities to Training Center</h5>
                        <div class="row">
                            <div class="col-md-6">
                                <label>Select Specialities</label>
                                <mat-selection-list [(ngModel)]="selectedSpecialities" [multiple]="true">
                                    <mat-list-option *ngFor="let s of specialities" [value]="s.id">{{s.name}}</mat-list-option>
                                </mat-selection-list>
                            </div>
                            <div class="col-md-6">
                                <label>Select Training Center</label>
                                <select class="form-select" [(ngModel)]="selectedTrainingCenterId">
                                    <option value="">Select Training Center</option>
                                    <option *ngFor="let center of trainingCenters" [value]="center.agreementNumber">{{ center.fullName || center.acronym }}</option>
                                </select>
                            </div>
                        </div>
                        <div class="mt-3">
                            <button class="btn btn-success" (click)="addSpecialitiesToCenter()" [disabled]="processingSpecialities || !selectedSpecialities.length || !selectedTrainingCenterId">Link Selected Specialities</button>
                        </div>
                    </div>
                </div>
            </div>
        </mat-tab>
        
        <!-- Onglet Filières -->
        <mat-tab label="Courses">
            <div class="mt-3">
                <!-- Barre d'outils -->
                <div class="row mb-3">
                    <div class="col-md-6">
                        <div class="d-flex gap-2">
                            <button class="btn btn-outline-primary" (click)="refreshCourses()" [disabled]="refreshingCourses">
                                <i class="bx bx-refresh" [class.bx-spin]="refreshingCourses"></i>
                                {{ refreshingCourses ? 'Actualisation...' : 'Actualiser' }}
                            </button>
                            <button class="btn btn-outline-info" (click)="exportCoursesToExcel()">
                                <i class="bx bx-export"></i>
                                Exporter
                            </button>
                        </div>
                    </div>
                    <div class="col-md-6 text-end">
                        <div class="d-flex gap-2 justify-content-end">
                            <button class="btn btn-outline-secondary" (click)="toggleAdvancedFiltersCourses()">
                                <i class="bx bx-filter-alt"></i>
                                {{ showAdvancedFiltersCourses ? 'Masquer' : 'Afficher' }} les filtres
                            </button>
                            <button class="btn btn-soft-primary waves-effect waves-light" 
                                    (click)="openCreateCourseModal()">
                                <i class="bx bx-plus"></i> Create Course
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Filtres avancés pour les cours -->
                <div class="row mb-3" *ngIf="showAdvancedFiltersCourses">
                    <div class="col-12">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-light">
                                <h6 class="mb-0">
                                    <i class="bx bx-filter-alt me-2"></i>
                                    Filtres avancés - Cours
                                </h6>
                            </div>
                            <div class="card-body">
                                <form [formGroup]="filterFormCourses" class="row g-3">
                                    <div class="col-md-3">
                                        <label class="form-label">Prix minimum</label>
                                        <input type="number" class="form-control" formControlName="minPrice" placeholder="0">
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Prix maximum</label>
                                        <input type="number" class="form-control" formControlName="maxPrice" placeholder="999999">
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Code</label>
                                        <input type="text" class="form-control" formControlName="code" placeholder="Code du cours">
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Statut</label>
                                        <select class="form-select" formControlName="status">
                                            <option value="">Tous</option>
                                            <option value="active">Actifs</option>
                                            <option value="inactive">Inactifs</option>
                                        </select>
                                    </div>
                                    <div class="col-12">
                                        <div class="d-flex gap-2">
                                            <button type="button" class="btn btn-primary" (click)="applyAdvancedFiltersCourses()">
                                                <i class="bx bx-search"></i>
                                                Appliquer les filtres
                                            </button>
                                            <button type="button" class="btn btn-outline-secondary" (click)="clearFiltersCourses()">
                                                <i class="bx bx-x"></i>
                                                Effacer
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Statistiques des filières -->
                <div class="row">
                    <div *ngFor="let stat of courseStats" class="col-md-4">
                        <app-stat [title]="stat.title" [value]="stat.value" [icon]="stat.icon"></app-stat>
                    </div>
                </div>
                
                <!-- Table des filières -->
                <div class="row mt-3">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-body">
                                <div class="row justify-content-between mb-3">
                                    <div class="col-md-4">
                                        <mat-form-field appearance="outline" class="w-100">
                                            <mat-label>Filter courses</mat-label>
                                            <input matInput (keyup)="applyFilterCourses($event)" #inputCourses placeholder="Search by name or description">
                                            <mat-icon matSuffix>search</mat-icon>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-md-2 text-end">
                                        <button mat-icon-button matTooltip="Refresh list" (click)="loadCourses()">
                                            <mat-icon>refresh</mat-icon>
                                        </button>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <table mat-table [dataSource]="dataSourceCourses" matSort class="w-100">
                                        <!-- Name Column -->
                                        <ng-container matColumnDef="name">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
                                            <td mat-cell *matCellDef="let course"> 
                                                <span class="fw-semibold">{{course.name || 'N/A'}}</span>
                                            </td>
                                        </ng-container>
                                        <!-- Code Column -->
                                        <ng-container matColumnDef="code">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Code </th>
                                            <td mat-cell *matCellDef="let course"> 
                                                <span class="badge bg-primary">{{course.code || 'N/A'}}</span>
                                            </td>
                                        </ng-container>
                                        <!-- Description Column -->
                                        <ng-container matColumnDef="description">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Description </th>
                                            <td mat-cell *matCellDef="let course"> 
                                                {{course.description || 'No description available'}}
                                            </td>
                                        </ng-container>
                                        <!-- Price Column -->
                                        <ng-container matColumnDef="priceForCqp">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Price </th>
                                            <td mat-cell *matCellDef="let course"> 
                                                <span class="badge bg-success">{{course.priceForDqp || 'N/A'}} FCFA</span>
                                            </td>
                                        </ng-container>
                                        <!-- Activée Column -->
                                        <ng-container matColumnDef="isActived">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Activée ? </th>
                                            <td mat-cell *matCellDef="let course"> 
                                                <span class="badge bg-success">Oui</span>
                                            </td>
                                        </ng-container>
                                        <!-- Actions Column -->
                                        <ng-container matColumnDef="actions">
                                            <th mat-header-cell *matHeaderCellDef class="text-end"> Actions </th>
                                            <td mat-cell *matCellDef="let course" class="text-end">
                                                <div class="d-flex justify-content-end gap-1">
                                                    <button mat-icon-button color="primary" matTooltip="Voir détail" (click)="openDetailCoursePopup(course)">
                                                        <mat-icon>visibility</mat-icon>
                                                    </button>
                                                    <button mat-icon-button color="accent" matTooltip="Edit" (click)="editCourse(course)">
                                                        <mat-icon>edit</mat-icon>
                                                    </button>
                                                    <button mat-icon-button color="warn" matTooltip="Delete" (click)="deleteCourse(course)" [disabled]="processingCourses">
                                                        <mat-icon>delete</mat-icon>
                                                    </button>
                                                    <button mat-icon-button color="warning" matTooltip="Toggle course" (click)="toggleCourse(course)">
                                                        <mat-icon>toggle_on</mat-icon>
                                                    </button>
                                                </div>
                                            </td>
                                        </ng-container>
                                        <tr mat-header-row *matHeaderRowDef="displayedColumnsCourses"></tr>
                                        <tr mat-row *matRowDef="let row; columns: displayedColumnsCourses;"></tr>
                                        <tr class="mat-row" *matNoDataRow>
                                            <td class="mat-cell text-center py-4" colspan="6">
                                                <div class="d-flex flex-column align-items-center">
                                                    <mat-icon class="mb-2" style="font-size: 48px; height: 48px; width: 48px;">search_off</mat-icon>
                                                    <h4 class="text-muted">No courses found</h4>
                                                    <p *ngIf="inputCourses.value" class="text-muted">
                                                        No matching results for "{{inputCourses.value}}"
                                                    </p>
                                                    <button mat-raised-button color="primary" class="mt-2" (click)="openCreateCourseModal()" *ngIf="!inputCourses.value">
                                                        Create your first course
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" showFirstLastButtons aria-label="Select page of courses" class="mt-3"></mat-paginator>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </mat-tab>
    </mat-tab-group>

    <!-- Modal pour les spécialités -->
    <div class="modal fade show" [ngClass]="{'d-block': showSpecialityModal}" tabindex="-1" role="dialog" *ngIf="showSpecialityModal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{{isEditModeSpeciality ? 'Edit' : 'Create'}} Speciality</h5>
                    <button type="button" class="btn-close" (click)="closeSpecialityModal()" aria-label="Close"></button>
                </div>
                <form [formGroup]="specialityForm" (ngSubmit)="onSubmitSpeciality()">
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Name</label>
                                    <input type="text" class="form-control" formControlName="name" placeholder="Speciality name">
                                    <div *ngIf="fSpeciality['name'].touched && fSpeciality['name'].invalid" class="text-danger">
                                        <small *ngIf="fSpeciality['name'].errors?.['required']">Name is required</small>
                                        <small *ngIf="fSpeciality['name'].errors?.['maxlength']">Max 100 characters</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Code</label>
                                    <input type="text" class="form-control" formControlName="code" placeholder="Speciality code">
                                    <div *ngIf="fSpeciality['code'].touched && fSpeciality['code'].invalid" class="text-danger">
                                        <small *ngIf="fSpeciality['code'].errors?.['required']">Code is required</small>
                                        <small *ngIf="fSpeciality['code'].errors?.['maxlength']">Max 20 characters</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Description *</label>
                            <textarea class="form-control" formControlName="description" rows="3" placeholder="Speciality description (required)"></textarea>
                            <div *ngIf="fSpeciality['description'].touched && fSpeciality['description'].invalid" class="text-danger">
                                <small *ngIf="fSpeciality['description'].errors?.['required']">Description is required</small>
                                <small *ngIf="fSpeciality['description'].errors?.['maxlength']">Max 500 characters</small>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Exam Type</label><br>
                                    <mat-checkbox formControlName="examTypeCQP" (change)="specialityForm.updateValueAndValidity()">CQP</mat-checkbox>
                                    <mat-checkbox formControlName="examTypeDQP" (change)="specialityForm.updateValueAndValidity()">DQP</mat-checkbox>
                                    <div *ngIf="specialityForm.errors?.['examTypeRequired'] && (fSpeciality['examTypeCQP'].touched || fSpeciality['examTypeDQP'].touched)" class="text-danger">
                                        <small>At least one exam type is required</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Training Center (Optional)</label>
                                    <select class="form-select" formControlName="trainingCenterId">
                                        <option value="">Select Training Center (Optional)</option>
                                        <option *ngFor="let center of trainingCenters" [value]="center.agreementNumber">
                                            {{ center.fullName || center.acronym }}
                                        </option>
                                    </select>
                                    <small class="text-muted">You can associate this speciality to a training center later</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" (click)="closeSpecialityModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary" [disabled]="processingSpecialities || specialityForm.invalid">
                            {{isEditModeSpeciality ? 'Update' : 'Create'}}
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal pour les filières -->
    <div class="modal fade show" [ngClass]="{'d-block': showCourseModal}" tabindex="-1" role="dialog" *ngIf="showCourseModal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{{isEditModeCourse ? 'Edit' : 'Create'}} Course</h5>
                    <button type="button" class="btn-close" (click)="closeCourseModal()" aria-label="Close"></button>
                </div>
                <form [formGroup]="courseForm" (ngSubmit)="onSubmitCourse()">
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Name</label>
                                    <input type="text" class="form-control" formControlName="name" placeholder="Course name">
                                    <div *ngIf="fCourse['name'].touched && fCourse['name'].invalid" class="text-danger">
                                        <small *ngIf="fCourse['name'].errors?.['required']">Name is required</small>
                                        <small *ngIf="fCourse['name'].errors?.['maxlength']">Max 100 characters</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Code</label>
                                    <input type="text" class="form-control" formControlName="code" placeholder="Course code">
                                    <div *ngIf="fCourse['code'].touched && fCourse['code'].invalid" class="text-danger">
                                        <small *ngIf="fCourse['code'].errors?.['required']">Code is required</small>
                                        <small *ngIf="fCourse['code'].errors?.['maxlength']">Max 20 characters</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <textarea class="form-control" formControlName="description" rows="3" placeholder="Course description"></textarea>
                            <div *ngIf="fCourse['description'].touched && fCourse['description'].invalid" class="text-danger">
                                <small *ngIf="fCourse['description'].errors?.['maxlength']">Max 500 characters</small>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Price for CQP (FCFA)</label>
                            <input type="number" class="form-control" formControlName="priceForCqp" placeholder="0">
                            <div *ngIf="fCourse['priceForCqp'].touched && fCourse['priceForCqp'].invalid" class="text-danger">
                                <small *ngIf="fCourse['priceForCqp'].errors?.['required']">Price is required</small>
                                <small *ngIf="fCourse['priceForCqp'].errors?.['min']">Price must be positive</small>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" (click)="closeCourseModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary" [disabled]="processingCourses || courseForm.invalid">
                            {{isEditModeCourse ? 'Update' : 'Create'}}
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
